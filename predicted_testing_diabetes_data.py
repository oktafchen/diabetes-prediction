# -*- coding: utf-8 -*-
"""Predicted Testing Diabetes Data.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1SU9T5YdKs1zrftyxwpMNZ2Oi0orbcHzj

#load data
"""

from google.colab import drive
drive.mount('/content/drive')

import joblib
import pandas as pd

# Ganti path sesuai lokasi file kamu di Drive
model = joblib.load('/content/drive/My Drive/Colab Notebooks/Example Dataset/Pima indians diabetes dataset/xgb_diabetes_model.pkl')
scaler = joblib.load('/content/drive/My Drive/Colab Notebooks/Example Dataset/Pima indians diabetes dataset/scaler.pkl')

"""#Input Data"""

# Data baru (misalnya dari input user)
input_data = pd.DataFrame([{
    'Pregnancies': 2,
    'Glucose': 120,
    'BloodPressure': 70,
    'SkinThickness': 25,
    'Insulin': 80,
    'BMI': 28.5,
    'DiabetesPedigreeFunction': 0.5,
    'Age': 32
}])

"""#Preprocess Data"""

numeric_columns = ['Pregnancies', 'Glucose', 'BloodPressure', 'SkinThickness',
                   'Insulin', 'BMI', 'DiabetesPedigreeFunction', 'Age']
scaled_columns = [col + 'Scaled' for col in numeric_columns]

# Transform pakai scaler
input_scaled_array = scaler.transform(input_data[numeric_columns])
input_scaled = pd.DataFrame(input_scaled_array, columns=scaled_columns)

"""#Output"""

# Prediksi
pred = model.predict(input_scaled)[0]
proba = model.predict_proba(input_scaled)[0][1]

# Tampilkan hasil
hasil = "Diabetes" if pred == 1 else "Tidak Diabetes"
print(f"Prediksi: {hasil}")
print(f"Probabilitas Diabetes: {proba * 100:.2f}%")